<UserControl 
    x:Class="Wpf_RunVision.Views.TabViews.PlcTabView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:local="clr-namespace:Wpf_RunVision.Views.TabViews"
    xmlns:vm="clr-namespace:Wpf_RunVision.ViewModels.TabViewModels" 
    xmlns:hc="https://handyorg.github.io/handycontrol"
    mc:Ignorable="d">

    <!-- 绑定ViewModel -->
    <UserControl.DataContext>
        <vm:PlcTabViewModel/>
    </UserControl.DataContext>

    <Grid>
        <!-- 主布局：三列结构 -->
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <GroupBox Grid.Column="0" Header="接收信号" Padding="10" Style="{StaticResource GroupBoxTab}">
            <Border Background="{DynamicResource RegionBrush}" CornerRadius="4">
                <TextBlock Text="2" VerticalAlignment="Center" HorizontalAlignment="Center"/>
            </Border>
        </GroupBox>

        <!-- 中间：发送信号区域 -->
        <GroupBox Grid.Column="1" Header="发送信号" Padding="10" Style="{StaticResource GroupBoxTab}">
            <Border Background="{DynamicResource RegionBrush}" CornerRadius="4">
                <TextBlock Text="2" VerticalAlignment="Center" HorizontalAlignment="Center"/>
            </Border>
        </GroupBox>

        <!-- 右侧：PLC配置区域 -->
        <Grid 
            Grid.Column="2" 
            Margin="30,15,30,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- PLC品牌选择 -->
            <ComboBox 
                Grid.Row="0"
                hc:InfoElement.Title="PLC品牌:"
                hc:InfoElement.TitlePlacement="Top"
                ItemsSource="{Binding CameraBrands}"
                SelectedItem="{Binding SelectedBrand, Mode=TwoWay}"
                Style="{StaticResource ComboBoxExtend}"
                HorizontalAlignment="Stretch"
                ToolTip="必选，PLC品牌"
                Margin="0,0,0,10"/>

            <!-- 通讯协议选择 -->
            <ComboBox 
                Grid.Row="1"
                hc:InfoElement.Title="通讯协议:"
                hc:InfoElement.TitlePlacement="Top"
                ItemsSource="{Binding AvailableSNs}"
                SelectedItem="{Binding SelectedSN, Mode=TwoWay}"
                Style="{StaticResource ComboBoxExtend}"
                HorizontalAlignment="Stretch"
                ToolTip="必选，通讯协议"
                Margin="0,0,0,10"/>

            <!-- IP地址输入 -->
            <TextBox 
                Grid.Row="2"
                hc:InfoElement.Title="PLC_IP地址:"
                hc:InfoElement.TitlePlacement="Top"
                hc:InfoElement.Placeholder="请输入IP地址"
                Text="{Binding SelectedRemark, Mode=TwoWay}"
                Style="{StaticResource TextBoxExtend}"
                HorizontalAlignment="Stretch"
                ToolTip="此项必填，PLC_IP地址"
                Margin="0,0,0,10"/>

            <!-- 端口号输入 -->
            <TextBox 
                Grid.Row="3"
                hc:InfoElement.Title="PLC_端口号:"
                hc:InfoElement.TitlePlacement="Top"
                hc:InfoElement.Placeholder="请输入端口号"
                Text="{Binding SelectedRemark, Mode=TwoWay}"
                Style="{StaticResource TextBoxExtend}"
                HorizontalAlignment="Stretch"
                ToolTip="此项必填，PLC_端口号"
                Margin="0,0,0,10"/>

            <!-- 分隔线 -->
            <hc:Divider 
                Grid.Row="4"
                LineStrokeThickness="1"
                Orientation="Horizontal"
                Margin="0,0,0,10"/>

            <!-- 连接测试按钮 -->
            <Button 
                Grid.Row="5"
                Height="40"
                Content="PLC连接测试"
                Command="{Binding AddCameraCommand}"
                HorizontalAlignment="Stretch"
                Margin="0,0,0,10"/>

            <!-- 保存配置按钮 -->
            <Button 
                Height="40"
                Grid.Row="6"
                Content="保存配置"
                Command="{Binding SaveConfigCommand}"
                HorizontalAlignment="Stretch"/>
        </Grid>
    </Grid>
</UserControl>
