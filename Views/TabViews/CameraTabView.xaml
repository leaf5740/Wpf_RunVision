<UserControl x:Class="Wpf_RunVision.Views.TabViews.CameraTabView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:Wpf_RunVision.Views.TabViews"
             xmlns:vm="clr-namespace:Wpf_RunVision.ViewModels.TabViewModels"
             xmlns:hc="https://handyorg.github.io/handycontrol"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800">

    <UserControl.DataContext>
        <vm:CameraTabViewModel />
    </UserControl.DataContext>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- 相机列表 DataGrid -->
        <GroupBox Grid.Column="0" Header="相机列表" Style="{StaticResource GroupBoxTab}">
            <DataGrid 
                HeadersVisibility="All"
                RowHeaderWidth="35"
                hc:DataGridAttach.ShowRowNumber="True"
                AutoGenerateColumns="False"
                CanUserSortColumns="False"
                ItemsSource="{Binding ConfiguredCameras}"
                SelectedItem="{Binding SelectedCamera, Mode=TwoWay}">
                <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding Brand}" Header="相机名称" IsReadOnly="True"/>
                    <DataGridTextColumn Binding="{Binding Sn}" Header="SN"/>
                    <DataGridTextColumn Binding="{Binding PlcAddress}" Header="Ready信号"/>
                    <DataGridTextColumn Binding="{Binding Remark}" Header="备注"/>
                </DataGrid.Columns>
            </DataGrid>
        </GroupBox>

        <!-- 右侧表单区域 -->
        <Grid Grid.Column="1" Margin="30,15,30,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- 相机品牌 ComboBox -->
            <ComboBox Grid.Row="0"
                      hc:InfoElement.Title="相机品牌:"
                      ItemsSource="{Binding CameraBrands}"
                      SelectedItem="{Binding SelectedBrand, Mode=TwoWay}"
                      hc:InfoElement.TitlePlacement="Top"
                      Style="{StaticResource ComboBoxExtend}"
                      HorizontalAlignment="Stretch"
                      Margin="0,0,0,10"/>

            <!-- 相机 SN ComboBox -->
            <ComboBox Grid.Row="1"
                      hc:InfoElement.Title="相机SN:"
                      ItemsSource="{Binding AvailableSNs}"
                      SelectedItem="{Binding SelectedSN, Mode=TwoWay}"
                      hc:InfoElement.TitlePlacement="Top"
                      Style="{StaticResource ComboBoxExtend}"
                      HorizontalAlignment="Stretch"
                      Margin="0,0,0,10"/>

            <!-- PLC Ready 信号地址 -->
            <TextBox Grid.Row="2"
                     hc:InfoElement.Title="Ready信号:"
                     Text="{Binding PlcReadyAddress, Mode=TwoWay}" 
                hc:InfoElement.TitlePlacement="Top"
                     Style="{StaticResource TextBoxExtend}"
                     HorizontalAlignment="Stretch"
                     hc:InfoElement.Placeholder="请输入Ready信号（PLC地址）"
                     Margin="0,0,0,10"/>

                <!-- 相机备注 -->
                <TextBox Grid.Row="3"
                     hc:InfoElement.Title="相机备注:"
                     Text="{Binding CameraRemark, Mode=TwoWay}" 
                    hc:InfoElement.TitlePlacement="Top"
                     Style="{StaticResource TextBoxExtend}"
                     HorizontalAlignment="Stretch"
                     hc:InfoElement.Placeholder="请输入相机备注（可空）"
                     Margin="0,0,0,10"/>

                    <hc:Divider Grid.Row="4"
                        LineStrokeThickness="1"
                        Orientation="Horizontal"
                        Margin="0,0,0,10"/>

                    <!-- 删除/添加按钮 -->
                    <Grid Grid.Row="5" Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Button Grid.Column="0"
                        Content="删除"
                        Command="{Binding DeleteSelectedCameraCommand}" 
                            Width="90"
                        Height="35"
                        HorizontalAlignment="Left"/>

                            <hc:Divider Grid.Column="1"
                            LineStrokeThickness="2"
                            LineStroke="{DynamicResource DarkPrimaryBrush}"
                            Orientation="Vertical"
                            MaxHeight="16"
                            HorizontalAlignment="Center"/>

                            <Button Grid.Column="2"
                        Content="添加"
                        Command="{Binding AddCameraCommand}"
                                Height="35"
                        Width="90"
                        HorizontalAlignment="Right"/>
                    </Grid>

                    <!-- 保存配置按钮 -->
                    <Button Grid.Row="6"
                    Height="40"
                    Content="保存配置"
                    Command="{Binding SaveConfigCommand}" 
                        HorizontalAlignment="Stretch"/>
        </Grid>
    </Grid>
</UserControl>